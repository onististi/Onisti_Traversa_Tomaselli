<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="/stylesheets/SingleMovieStyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css">

    <script>
        var actorsData = {{{ json actors.data}}}; //passaggio dei dati al js per la popolazione
        var crewData = {{{json crew.data}}};
    </script>
</head>
<body>
<header>
    {{#if isLoggedIn}}
        <div class="welcome-message">
            Welcome, {{user.username}}
        </div>
    {{/if}}
    <nav>
        <h1 class="page-title">CINEVERSE</h1>
        <a href="/" class="home-icon">üè†</a>
        <div class="search-container">
            <input type="text" placeholder="Search">
            <button>X</button>
        </div>
        <div class="nav-links">
            <a href="/movies">MOVIES</a>
            <a href="/actors">ACTORS</a>
            <a href="/chat">CHAT</a>
            {{#if isLoggedIn}}
                <a href="/auth/logout">LOGOUT</a>
            {{else}}
                <a href="/auth/login" class="login-btn">LOGIN / SIGN UP</a>
            {{/if}}
        </div>
    </nav>
</header>


<div class="movie-container">
    <div class="movie-header">
        <div class="left-content">
            <h1 class="movie-title" id="movieName">{{movie.name}}</h1>
            <div class="tagline" id="movieTagline">{{movie.tagline}}</div>
            <div class="description-section">
                <div class="header-row">
                    <h2>DESCRIPTION</h2>
                    <span class="duration" id="movieDuration">DURATION: {{movie.minute}} MIN</span>
                </div>
                <div class="description-container">
                    <div class="description-text">
                        <p id="movieDescription">{{movie.description}}</p>
                    </div>
                </div>

                <div class="thread-button-container">
                    <a href = "../chat/movie/{{movie.id}}" id="threadButton" class="thread-button">Film's Thread</a>
                </div>
            </div>
        </div>
        <div class="overlay" id = "poster" style="background-image: url('{{movie.posterLink}}');"></div>
    </div>

    <div class="content-wrapper">
        <div class="right-content">
            <div class="actors-section">
                <h2>ACTORS</h2>
                <div class="actors-slider" id="actorsSlider">
                    <!-- Slideshow fillato da js se ci sono, se no unknown -->
                </div>
                <div class="slider-nav actors-nav">
                    <div class="prev-arrow-actors">‚ùÆ</div>
                    <div class="next-arrow-actors">‚ùØ</div>
                </div>
            </div>

            <div class="crew-section">
                <h2>CREW</h2>
                <div class="crew-slider" id="crewSlider">
                    <!-- Slideshow fillato da js se ci sono, se no unknown -->
                </div>
                <div class="slider-nav crew-nav">
                    <div class="prev-arrow-crew">‚ùÆ</div>
                    <div class="next-arrow-crew">‚ùØ</div>
                </div>
            </div>

            <div class="movie-info">
                <h2>MOVIE INFO</h2>
                <table class="info-table">
                    <tr>
                        <td>Genre</td>
                        <td id="movieGenre">{{#each movie.genres}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}</td>
                    </tr>
                    <tr>
                        <td>Year</td>
                        <td id="movieYear">{{movie.year}}</td>
                    </tr>
                    <tr>
                        <td>Rating</td>
                        <td id="movieRating">{{movie.rating}} /5</td>
                    </tr>
                    <tr>
                        <td>Studios</td>
                        <td id="movieStudios">{{#each movie.studios}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}</td>
                    </tr>
                    <tr>
                        <td>Themes</td> <!--  per non fare uscire ultima virgola unless last  -->
                        <td id="movieThemes">{{#each movie.themes}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}</td>
                    </tr>
                    <tr>
                        <td>Language</td>
                        <td id="movieLanguages">{{movie.language}}</td>
                    </tr>
                    <tr>
                        <td>Dubbed in</td>
                        <td id="movieDubbed">{{movie.dubbing}}</td>
                    </tr>
                    <tr>
                        <td>Released in</td>
                        <td id="movieReleased">{{movie.releaseInfo}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> <!--usato per il carosello -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
<script src="/javascripts/movie.js"></script>
</body>
</html>